!function(r){var e={};function t(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return r[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=r,t.c=e,t.d=function(r,e,s){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:s})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(1&e&&(r=t(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var o in r)t.d(s,o,function(e){return r[e]}.bind(null,o));return s},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";class LogoParser{constructor(r,e,t){this.logo=r,this.console=e,this.status=t,this.clearWarning(),this.clearErr(),this.vars={},this.funs={},this.labels={},this.loadShortCode()}updateStatus(r=""){let e="";e+="("+this.logo.getX().toFixed(3)+", "+(-this.logo.getY()).toFixed(3)+"), ",e+="âˆ : "+(this.logo.getAngle()%360).toFixed(3)+", ",e+=this.logo.isPendown()?"Pendown":"Penup",e+=" "+this.getLastErr(r),this.status.html(e)}_addShortCode(r,e,t){this.funs[r]=[e,t]}loadShortCode(){this._addShortCode("polygon",["corner","len"],"repeat :corner [fd :len rt 360/:corner]"),this._addShortCode("star",["len"],"repeat 5 [fd :len rt 144]"),this._addShortCode("tri",["n"],"repeat 3 [fd :n rt 120]"),this._addShortCode("cube",["n"],"repeat 6 [tri :n rt 60]"),this._addShortCode("fillsquare",["size"],'make "tmp :size repeat :size [polygon 4 :tmp dec :tmp]'),this._addShortCode("fillpolygon",["corner","size"],'make "tmp :size repeat :size [polygon :corner :tmp dec :tmp]')}addVar(r,e){this.vars[r]=this.evalVars(e)}delVar(r){r in this.vars?delete this.vars[r]:this.pushWarning("delVar",r)}getVar(r){return r in this.vars?this.vars[r]:null}clearWarning(){this.warning=""}clearErr(){this.error=""}getErr(){return this.error}getWarning(){return this.warning}pushErr(r,e,t=""){this.error+=t?"Error: "+r+" "+e+": "+t+"\n":"Error: "+r+" "+e+"\n"}getLastErr(r){let e=(r=(r=r||this.error).trim()).split("\n");return console.log(e),e.length>0?e[e.length-1].trim():""}pushWarning(r,e,t=""){this.warning+=t?"Warning: "+r+" "+e+": "+t+"\n":"Warning: "+r+" "+e+"\n"}updateVars(){this.vars.random=Math.random(),this.vars.RANDOM=Math.random(),this.vars.turtlex=this.logo.getX(),this.vars.turtley=this.logo.getY(),this.vars.turtleangle=this.logo.getAngle()}evalVars(s){let var_arr=parseVarName(s),varlen=var_arr.length;this.updateVars();for(let r=0;r<varlen;++r){let e=var_arr[r].substring(1),t=this.getVar(e);void 0!==t&&(s=s.replaceAll(":"+e,t))}try{return eval(s)}catch(r){return s}}skipTo(r,e,t){for(;e<t&&(isSpace(r[e])||"\n"==r[e]);)e++;if(e>=t)return e;if(";"==r[e]||"#"==r[e]){for(e++;e<t&&"\n"!=r[e];)e++;e++}if(e+1<t&&"/"==r[e]&&"/"==r[e+1]){for(e+=2;e<t&&"\n"!=r[e];)e++;e++}if(e+1<t&&"/"==r[e]&&"*"==r[e+1]){for(e+=2;e<t&&("*"!=r[e]||"/"!=r[e+1]);)e++;e+=2}return e}run(s,i,U,depth=0){let find_left,find_right,repeat_left,repeat_right,find_else,nested,expr,second_word,second_word_word,find_next_body,ifelse,the_var_name;if(depth>MAX_DEPTH)return this.pushErr("",LOGO_ERR_STACK_OVERFLOW,depth),!1;for(;i<U&&(i=this.skipTo(s,i,U),!(i>=U));){let x=getNextWord(s,i,U);i=x.next;let word=x.word;if(""==word)continue;let lword=word.toLowerCase(),y=getNextWord(s,i,U),word_next=y.word;if("@"!=lword[0])switch(lword){case"[":case"]":break;case"st":case"showturtle":this.logo.st();break;case"ht":case"hideturtle":this.logo.ht();break;case"cs":case"clearscreen":this.logo.cs();break;case"home":this.logo.home();break;case"pu":case"penup":this.logo.pu();break;case"dot":this.logo.dot();break;case"make":if(!word_next.startsWith('"'))return this.pushErr(word,LOGO_ERR_MISSING_QUOTE),!1;let var_name=word_next.substring(1);if(!isValidVarName(var_name))return this.pushErr(word,LOGO_ERR_INVALID_VAR_NAME),!1;let word_next2=getNextWord(s,y.next,U);if("["==word_next2.word){let r=getNextBody(s,i,U);if(r.right>=U)return this.pushErr(word,LOGO_ERR_MISSING_RIGHT),!1;let e=s.substring(r.left+1,r.right);this.addVar(var_name,e),i=r.right+1}else this.addVar(var_name,this.evalVars(word_next2.word)),i=word_next2.next+1;break;case"goto":if(!word_next.startsWith("@"))return this.pushErr(word,LOGO_ERR_INVALID_LABEL),!1;let label_1=word_next.substring(1);if(!this.labels[label_1])return this.pushErr(word,LOGO_ERR_INVALID_LABEL),!1;i=this.labels[label_1];break;case"stop":return!1;case"rect":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;second_word=getNextWord(s,y.next,U),second_word_word=second_word.word,expr=this.evalVars(second_word_word);try{second_word_word=eval(expr)}catch(r){return this.pushErr(word,LOGO_ERR_EVAL,expr),!1}if(""===second_word_word||!isNumeric(second_word_word))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,second_word_word),!1;this.logo.fillRec(word_next,second_word_word),i=second_word.next;break;case"penerase":case"pe":this.logo.eraser();case"wait":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.wait(parseFloat(word_next)),i=y.next;break;case"remove":if(!word_next.startsWith('"'))return this.pushErr(word,LOGO_ERR_MISSING_QUOTE),!1;let var_name1=word_next.substring(1);if(!isValidVarName(var_name1))return this.pushErr(word,LOGO_ERR_INVALID_VAR_NAME),!1;this.delVar(var_name1),i=y.next;break;case"clear":this.vars={},this.funs={};break;case"clearconsole":this.console.val("");break;case"penpaint":case"ppt":this.logo.pen();case"pd":case"pendown":this.logo.pd();break;case"fd":case"walk":case"forward":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.fd(parseFloat(word_next)),i=y.next;break;case"square":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.square(parseFloat(word_next)),i=y.next;break;case"setpc":case"pc":case"setpencolor":case"setcolor":if("["==word_next){if(find_next_body=getNextBody(s,i,U),find_next_body.right>=U)return this.pushErr(word,LOGO_ERR_MISSING_RIGHT),!1;let r=s.substring(find_next_body.left+1,find_next_body.right),e=r.split(" ").map(r=>r.trim()).filter(r=>""!=r);if(3!=e.length)return this.pushErr(word,LOGO_ERR_INVALID_RGB,r),!1;let t=this.evalVars(e[0]),o=this.evalVars(e[1]),n=this.evalVars(e[2]);this.logo.setLineColor("rgb("+t+","+o+", "+n+")"),i=find_next_body.right+1}else{if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.setPc(parseInt(word_next)),i=y.next}break;case"jump":case"jmp":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;let pd=this.logo.isPendown();this.logo.pu(),this.logo.fd(parseFloat(word_next)),pd&&this.logo.pd(),i=y.next;break;case"setx":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.moveToX(parseFloat(word_next)),i=y.next;break;case"sety":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.moveToY(-parseFloat(word_next)),i=y.next;break;case"bk":case"backward":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.bk(parseFloat(word_next)),i=y.next;break;case"fontsize":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.setFontSize(parseFloat(word_next)),i=y.next;break;case"print":case"console":let cur_console_text,result;if("["!=word_next)word_next=this.evalVars(word_next),result=word_next,this.console&&(cur_console_text=this.console.val(),this.console.val(cur_console_text+"\n"+result)),console.log(result),i=y.next;else{if(find_next_body=getNextBody(s,i,U),find_next_body.right>=U)return this.pushErr(word,LOGO_ERR_MISSING_RIGHT),!1;result=this.evalVars(s.substring(find_next_body.left+1,find_next_body.right)),this.console&&(cur_console_text=this.console.val(),this.console.val(cur_console_text+"\n"+result)),console.log(result),i=find_next_body.right+1}break;case"rt":case"right":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.rt(parseFloat(word_next)),i=y.next;break;case"circle":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.circle(parseFloat(word_next)),i=y.next;break;case"dotxy":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;second_word=getNextWord(s,y.next,U),second_word_word=second_word.word,expr=this.evalVars(second_word_word);try{second_word_word=eval(expr)}catch(r){return this.pushErr(word,LOGO_ERR_EVAL,expr),!1}if(""===second_word_word||!isNumeric(second_word_word))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,second_word_word),!1;this.logo.dotxy(word_next,second_word_word),i=second_word.next;break;case"setxy":case"moveto":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;second_word=getNextWord(s,y.next,U),second_word_word=second_word.word,expr=this.evalVars(second_word_word);try{second_word_word=eval(expr)}catch(r){return this.pushErr(word,LOGO_ERR_EVAL,expr),!1}if(""===second_word_word||!isNumeric(second_word_word))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,second_word_word),!1;this.logo.moveTo(word_next,-second_word_word),i=second_word.next;break;case"screen":case"setsc":case"setscreencolor":if(""===word_next)return this.pushErr(word,LOGO_ERR_MISSING_PARAM,word_next),!1;this.logo.setScreenColor(word_next),i=y.next;break;case"dec":if(!word_next.startsWith(":"))return this.pushErr(word,LOGO_ERR_MISSING_VAR_NAME,word_next),!1;if(the_var_name=word_next.substring(1),!(the_var_name in this.vars))return this.pushErr(word,LOGO_ERR_INVALID_VAR_NAME,word_next),!1;this.vars[the_var_name]--,i=y.next;break;case"turn":case"seth":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.setAngle(parseFloat(word_next)),i=y.next;break;case"inc":if(!word_next.startsWith(":"))return this.pushErr(word,LOGO_ERR_MISSING_VAR_NAME,word_next),!1;if(the_var_name=word_next.substring(1),!(the_var_name in this.vars))return this.pushErr(word,LOGO_ERR_INVALID_VAR_NAME,word_next),!1;this.vars[the_var_name]++,i=y.next;break;case"lt":case"left":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.lt(parseFloat(word_next)),i=y.next;break;case"width":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;this.logo.setLineWidth(parseFloat(word_next)),i=y.next;break;case"color":if(""===word_next)return this.pushErr(word,LOGO_ERR_MISSING_PARAM,word_next),!1;this.logo.setLineColor(word_next),i=y.next;break;case"text":case"label":let text_result;if("["!=word_next)word_next=this.evalVars(word_next),this.logo.drawText(word_next),i=y.next;else{if(find_next_body=getNextBody(s,i,U),find_next_body.right>=U)return this.pushErr(word,LOGO_ERR_MISSING_RIGHT),!1;text_result=s.substring(find_next_body.left+1,find_next_body.right),this.logo.drawText(this.evalVars(text_result)),i=find_next_body.right+1}break;case"js":if("["!=word_next&&this.pushErr(word,LOGO_ERR_MISSING_LEFT,word_next),find_next_body=getNextBody(s,i,U),find_next_body.right>=U)return this.pushErr(word,LOGO_ERR_MISSING_RIGHT),!1;let js_code=s.substring(find_next_body.left+1,find_next_body.right).trim();eval(js_code),i=find_next_body.right+1;break;case"for":if("["!=word_next&&this.pushErr(word,LOGO_ERR_MISSING_LEFT,word_next),find_next_body=getNextBody(s,i,U),find_next_body.right>=U)return this.pushErr(word,LOGO_ERR_MISSING_RIGHT),!1;let for_code=s.substring(find_next_body.left+1,find_next_body.right).trim();i=find_next_body.right+1;let for_body=getNextBody(s,i,U);if(for_body.right>=U)return this.pushErr(word,LOGO_ERR_MISSING_RIGHT),!1;let for_code2=s.substring(for_body.left+1,for_body.right).trim();if(for_code.length>0&&for_code2.length>0){let r=for_code.split(" ").map(r=>r.trim()).filter(r=>""!=r),e=0,t="",s=null;if(isValidVarName(r[0])&&(t=r[0],t in this.vars&&(s=this.vars[t]),this.vars[t]=0,e++),r.length-e<2)return this.pushErr(word,LOGO_ERR_INVALID_FOR),!1;if(r.length-e>3)return this.pushErr(word,LOGO_ERR_INVALID_FOR),!1;let o=this.evalVars(r[e]),i=this.evalVars(r[e+1]),n=1;if(e+2<r.length&&(n=this.evalVars(r[e+2])),""===o||!isNumeric(o))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,o),!1;if(""===i||!isNumeric(i))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,i),!1;if(""===n||!isNumeric(n))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,n),!1;o=parseInt(o),i=parseInt(i),n=parseInt(n);for(let r=o;r<=i;r+=n)if(this.addVar("repcount",r-o+1),this.addVar("REPCOUNT",r-o+1),""!=t&&(this.vars[t]=r),!this.run(for_code2,0,for_code2.length,depth+1))return!1;""!=t&&null!==s&&(this.vars[t]=s)}i=for_body.right+1;break;case"if":if(word_next=this.evalVars(word_next),""===word_next)return this.pushErr(word,LOGO_ERR_MISSING_EXP,word_next),!1;if(find_left=getNextWord(s,y.next,U),"["!=find_left.word)return this.pushErr(word,LOGO_ERR_MISSING_LEFT,find_left.word),!1;for(repeat_left=find_left.next,find_right=repeat_left+1,nested=1;find_right<U&&("["==s[find_right]&&nested++,"]"!=s[find_right]||(nested--,0!=nested));)find_right++;if(find_right>=U&&this.pushWarning(word,LOGO_ERR_MISSING_RIGHT),ifelse=iftrue(word_next),ifelse&&!this.run(s,repeat_left,find_right,depth+1))return!1;if(find_else=getNextWord(s,find_right+1,U),"else"==find_else.word.toLowerCase()){let r=getNextBody(s,find_else.next,U);if("["!=r.ch)return this.pushErr(word,LOGO_ERR_MISSING_LEFT,r.ch),!1;if(!ifelse&&!this.run(s,r.left,r.right,depth+1))return!1;i=r.right+1}else i=find_right+1;break;case"to":let next_word,funs_name=y.word.trim().toLowerCase();if(!isValidVarName(funs_name))return this.pushErr(word,LOGO_ERR_INVALID_FUN_NAME,funs_name),!1;i=y.next;let start_fun_idx=i,end_fun_idx=-1;for(;;){let r=i;if(next_word=getNextWord(s,i,U),i=next_word.next,"end"==next_word.word.toLowerCase()){end_fun_idx=r;break}if(""==next_word.word||next_word.next>=U)return this.pushErr(word,LOGO_ERR_MISSING_END,next_word),!1}if(-1==end_fun_idx)return this.pushErr(word,LOGO_ERR_MISSING_END,""),!1;let funs_s=s.substring(start_fun_idx,end_fun_idx).trim();if(funs_s&&y){let r=0,e=s.length,t=[],o=r;for(;r<U;){o=r;let s=getNextWord(funs_s,r,e);if(r=s.next,!s.word.startsWith(":"))break;{let r=s.word.substring(1);if(!isValidVarName(r))return this.pushErr(word,LOGO_ERR_INVALID_VAR_NAME,r),!1;t.push(r)}}let i=funs_s.substring(o,e).trim();this.funs[funs_name]=[t,i]}break;case"repeat":if(word_next=this.evalVars(word_next),""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;if(find_left=getNextWord(s,y.next,U),"["!=find_left.word)return this.pushErr(word,LOGO_ERR_MISSING_LEFT,find_left.word),!1;for(repeat_left=find_left.next,find_right=repeat_left+1,nested=1;find_right<U&&("["==s[find_right]&&nested++,"]"!=s[find_right]||(nested--,0!=nested));)find_right++;find_right>=U&&this.pushWarning(word,LOGO_ERR_MISSING_RIGHT);for(let r=0;r<word_next;++r)if(this.addVar("repcount",r+1),this.addVar("REPCOUNT",r+1),!this.run(s,repeat_left,find_right,depth+1))return!1;i=find_right+1;break;case"while":if(find_left=getNextWord(s,y.next,U),"["!=find_left.word)return this.pushErr(word,LOGO_ERR_MISSING_LEFT,find_left.word),!1;for(repeat_left=find_left.next,find_right=repeat_left+1,nested=1;find_right<U&&("["==s[find_right]&&nested++,"]"!=s[find_right]||(nested--,0!=nested));)find_right++;find_right>=U&&this.pushWarning(word,LOGO_ERR_MISSING_RIGHT);let tmp=word_next;for(;;){if(word_next=this.evalVars(tmp),""===word_next)return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;if(!iftrue(word_next))break;if(!this.run(s,repeat_left,find_right,depth+1))return!1}i=find_right+1;break;case"do":if(find_left=getNextWord(s,y.next,U),"["!=find_left.word)return this.pushErr(word,LOGO_ERR_MISSING_LEFT,find_left.word),!1;for(repeat_left=find_left.next,find_right=repeat_left+1,nested=1;find_right<U&&("["==s[find_right]&&nested++,"]"!=s[find_right]||(nested--,0!=nested));)find_right++;find_right>=U&&this.pushWarning(word,LOGO_ERR_MISSING_RIGHT);let do_exp=word_next;if(word_next=this.evalVars(do_exp),ifelse=iftrue(word_next),""===word_next)return this.pushErr(word,LOGO_ERR_MISSING_EXP,word_next),!1;for(;iftrue(word_next);){if(!this.run(s,repeat_left,find_right,depth+1))return!1;word_next=this.evalVars(do_exp)}if(find_else=getNextWord(s,find_right+1,U),"else"==find_else.word.toLowerCase()){let r=getNextBody(s,find_else.next,U);if("["!=r.ch)return this.pushErr(word,LOGO_ERR_MISSING_LEFT,r.ch),!1;if(!ifelse&&!this.run(s,r.left,r.right,depth+1))return!1;i=r.right+1}else i=find_right+1;break;default:if(word=word.toLowerCase(),word in this.funs){let f_params=this.funs[word][0],f_body=this.funs[word][1],f_len=f_params.length,local_vars={};for(let fi=0;fi<f_len;++fi){let param=getNextWord(s,i,U);i=param.next,word_next=param.word,expr=this.evalVars(word_next);try{word_next=eval(expr)}catch(r){return this.pushErr(word,LOGO_ERR_EVAL,word_next),!1}if(""===word_next||!isNumeric(word_next))return this.pushErr(word,LOGO_ERR_MISSING_NUMBERS,word_next),!1;if(local_vars[f_params[fi]]=this.vars[f_params[fi]],this.addVar(f_params[fi],word_next),i>=U)break}let result=this.run(f_body,0,f_body.length,depth+1);for(let r=0;r<f_len;++r)this.vars[f_params[r]]=local_vars[f_params[r]];if(i>=U)break;continue}return this.pushErr(word,LOGO_ERR_UNKNOWN_COMMAND,word),!1}else{if(1==lword.length)return this.pushErr(word,OGO_ERR_INVALID_LABEL),!1;const r=lword.substring(1);this.labels[r]=i}}return!0}}void 0!==module.exports&&(module.exports={LogoParser:LogoParser})}]);